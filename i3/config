# -----
# Jamie Luck's i3 config file
#
# Peep dat http://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod1
set $mod4 Mod4
floating_modifier $mod

# -----
# Font
# ISO 10646 = Unicode
#font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
#font -misc-envy code r-medium-r-normal--9-*-*-*-*-*-*-iso10646-*
font xft:Envy Code R 9

# -----
# Colors
set $black #393939
set $red #E04613
set $green #9DBA3A
set $yellow #F5B915
set $blue #6C9EAB
set $magenta #652F90
set $cyan #EA7D24
set $white #E7E8E9
set $fore #FAFAFA
set $back #262729

# class											border		backgr.		text		indicator
client.focused 							$black		$back			$yellow	$red
client.focused_inactive			$black		$back			$yellow	$red
client.unfocused						$back			$back			$green	$red
client.urgent 							$red			$back			$red		$red

# -----
# Client-specific rules

# We're calling the workspaces as follows:
# a: terminAls, shit like that
# s: web browSing, general internets
# d: work, it's Dumb
# f: Fun!
# g: Generally misc.

assign [class="Firefox"] 2:s
assign [class="Opera"] 2:s
assign [class="Abiword"] 3:d
assign [class="Eclipse"] 3:d
assign [class="net-minecraft-LauncherFrame"] 4:f
assign [class="Steam"] 4:f

for_window [class="net-minecraft-LauncherFrame"] floating enable
for_window [class="MPlayer"] floating enable
for_window [class="VirtualBox"] floating enable
for_window [class="Lxappearance"] floating enable
for_window [class="Steam"] floating enable
for_window [class="Event Tester"] floating enable
for_window [class="mirage"] floating enable

# -----
# Keymaps

# Default mode is our insert mode since so many keystrokes are captured by clients. Getting out of it will be grave
# Normal mode will be our normal mode, you get to default by using i.
# 	This will include window movement, nav, tmux controls, and generic comm
# Media is since I'm a music whore, haven't figured the shortcut yet
# Commands is for special commands, will be triggered by ; and uses dmenu

# ---
# Insert Mode (default)

# Mode Changing
bindsym grave mode "normal"
bindsym $mod+Escape mode "normal"
bindsym $mod+n mode "normal"
bindsym $mod+r mode "resize"
bindsym $mod+p mode "media"

# Special Keys
bindsym XF86KbdBrightnessUp exec asus-kbd-backlight up
bindsym XF86KbdBrightnessDown exec asus-kbd-backlight down 
bindsym XF86TouchpadToggle exec ~/Scripts/touchpadtoggle
bindsym XF86WebCam exec "scrot -q 100 '%Y-%m-%d_%H-%M-%S_$wx$h.png' -e 'mv $f ~/Pictures/screenshot'"
bindsym XF86AudioRaiseVolume exec ~/Scripts/dvol -i 5
bindsym XF86AudioLowerVolume exec ~/Scripts/dvol -d 5
bindsym XF86AudioMute exec ~/Scripts/dvol -t
bindsym XF86AudioPlay exec mpc toggle
bindsym XF86AudioNext exec mpc next
bindsym XF86AudioPrev exec mpc prev
bindsym XF86AudioStop exec mpc stop
#bindsym XF86Launch6 exec 
bindsym XF86Calculator exec ~/Scripts/dmenu_calc

# Program and Menu Launchers
bindsym Mod4+t exec i3-sensible-terminal

bindsym Mod1+F1 exec ~/Scripts/mpc_dmenu_playlist
bindsym Mod1+F2 exec ~/Scripts/obmenu.sh
bindsym Mod1+F3 exec ~/Scripts/mpc_dmenu
bindsym Mod1+F4 exec ~/Scripts/mpc_dmenu_search
bindsym Mod1+F7 exec ~/Scripts/dmenu_winsearch
bindsym Mod1+F8 exec ~/Scripts/man_dmenu

bindsym Ctrl+Mod1+b exec ~/Scripts/miscWall.sh
bindsym Ctrl+Mod4+b exec ~/Scripts/dmenu_wallpaper

# Kill Client
bindsym $mod+Shift+q kill

# Change Focus, Move
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+apostrophe fullscreen
bindsym $mod+Down split v
bindsym $mod+Up split v
bindsym $mod+Left split h
bindsym $mod+Right split h
bindsym $mod+m floating toggle
bindsym $mod+Shift+m focus mode_toggle
bindsym $mod+bracketleft layout toggle
bindsym $mod+bracketright layout toggle split
#bindsym $mod+p focus parent
#bindsym $mod+d focus child

# Workspaces
bindsym $mod+w workspace next
bindsym $mod+b workspace prev

bindsym $mod+a workspace 1:a
bindsym $mod+s workspace 2:s
bindsym $mod+d workspace 3:d
bindsym $mod+f workspace 4:f
bindsym $mod+g workspace 5:g

bindsym $mod+Shift+a move container to workspace 1:a
bindsym $mod+Shift+s move container to workspace 2:s
bindsym $mod+Shift+d move container to workspace 3:d
bindsym $mod+Shift+f move container to workspace 4:f
bindsym $mod+Shift+g move container to workspace 5:g

bindsym $mod+minus scratchpad show
bindsym $mod+Shift+minus move scratchpad

# ---
# Normal Mode
mode "normal" {
	# Mode Changes
	bindsym i mode "default"
	bindsym r mode "resize"
	bindsym o workspace prev ;mode "default"
	bindsym Shift+o workspace next ;mode "default"

	bindsym semicolon exec ~/Scripts/i3menu

	# Focus
	bindsym h focus left
	bindsym j focus down
	bindsym k focus up
	bindsym l focus right

	bindsym Shift+h move left
	bindsym Shift+j move down
	bindsym Shift+k move up
	bindsym Shift+l move right

	# Tmux Controls (Alt is pane op, Win is window op)
	#-F "#S: #{session_windows} Windows #{?session_attached,[Attached,[Not Attached}, #{?pane_active,Active],Inactive]}"
	bindsym $mod+s exec source ~/.dmenurc && tmux switch-client -t$(tmux ls | $DMENU -p "Tmux:" | cut -c1)
	bindsym $mod+h exec tmux select-pane -L
	bindsym $mod+j exec tmux select-pane -D
	bindsym $mod+k exec tmux select-pane -U
	bindsym $mod+l exec tmux select-pane -R
	bindsym $mod+comma exec tmux select-pane -l
	bindsym $mod+q exec tmux kill-pane
	bindsym $mod+z exec tmux resize-pane -Z

	bindsym $mod4+h exec tmux previous-window
	bindsym $mod4+l exec tmux next-window
	bindsym $mod4+comma exec tmux last-window
	bindsym $mod4+bracketleft exec tmux next-layout

	# Client Changes
	bindsym Shift+q kill

	bindsym m floating toggle
	bindsym Shift+m focus mode_toggle

	# Change container layout (stacked, tabbed, toggle split)
	bindsym bracketleft layout toggle
	bindsym bracketright layout toggle split
	bindsym apostrophe fullscreen

	# Workspaces
	bindsym w workspace next
	bindsym b workspace prev

	bindsym a workspace 1:a
	bindsym s workspace 2:s
	bindsym d workspace 3:d
	bindsym f workspace 4:f
	bindsym g workspace 5:g

	bindsym Shift+a move container to workspace 1:a
	bindsym Shift+s move container to workspace 2:s
	bindsym Shift+d move container to workspace 3:d
	bindsym Shift+f move container to workspace 4:f
	bindsym Shift+g move container to workspace 5:g

	bindsym minus scratchpad show
	bindsym Shift+minus move scratchpad

	# Menu Launchers & Specialized Key Handlers
	bindsym F1 exec systemctl hibernate
	bindsym F2 exec ~/Scripts/obmenu.sh
	bindsym F3 exec asus-kbd-backlight down 
	bindsym F4 exec asus-kbd-backlight up
	bindsym F5 exec xbacklight -dec 40
	bindsym Mod1+F5 exec ~/Scripts/rscontrol -i
	bindsym Mod1+Mod4+F5 Exec ~/Scripts/rscontrol -l
	bindsym F6 exec xbacklight -inc 40
	bindsym Mod1+F6 exec ~/Scripts/rscontrol -d
	bindsym Mod1+Mod4+F6 Exec ~/Scripts/rscontrol -b
	bindsym F7 exec xbacklight -set 0
	bindsym Mod1+F8 exec ~/Scripts/man_dmenu
	bindsym F9 exec ~/Scripts/touchpadtoggle
	bindsym F10 exec ~/Scripts/dvol -t
	bindsym F11 exec ~/Scripts/dvol -d 5
	bindsym F12 exec ~/Scripts/dvol -i 5

	bindsym XF86Launch6 exec gksudo mount -t vfat /dev/sdb1 /mnt/vfat
	bindsym Shift+XF86Launch6 exec gksudo umount /mnt/vfat

	bindsym Down exec mpc toggle
	bindsym Right exec mpc next
	bindsym Left exec mpc prev
	bindsym Up exec mpc stop
}

# ---
# Resize Mode

mode "resize" {
	# Mode Changes
	bindsym i mode "default"
	bindsym grave mode "normal"

	# Window Changes
  bindsym h resize shrink width 10 px or 10 ppt
  bindsym j resize grow height 10 px or 10 ppt
  bindsym k resize shrink height 10 px or 10 ppt
  bindsym l resize grow width 10 px or 10 ppt
}

# ---
# Media Mode

mode "media" {
	# Mode Changes
	bindsym $mod+m mode "default"
	bindsym i mode "default"
	bindsym grave mode "normal"

	bindsym p exec ~/Scripts/mpc_dmenu_playlist
	bindsym t exec ~/Scripts/mpc_dmenu
	bindsym c exec ~/Scripts/mpc_dmenu_search

	bindsym h exec mpc prev
	bindsym j exec ~/Scripts/dvol -i 5
	bindsym l exec mpc next
	bindsym k exec ~/Scripts/dvol -d 5
	bindsym r exec killall mpd && mpd
	bindsym f exec mpc toggle
	bindsym m exec ~/Scripts/dvol -t

	bindsym Mod1+F1 exec ~/Scripts/mpc_dmenu_playlist
	bindsym Mod1+F3 exec ~/Scripts/mpc_dmenu
	bindsym Mod1+F4 exec ~/Scripts/mpc_dmenu_search
}

# -----
# General

# Reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# -----
# i3bar init

bar {
        status_command i3status --config ~/.i3status.conf
				#status_command ~/Scripts/i3mpc
				mode dock
				#mode hide
	 			modifier Mod1
				position top
				#font
				colors {
					background $back
					#statusline
					focused_workspace $back $yellow
					active_workspace $fore $green
					inactive_workspace $back $green
					urgent_workspace $back $red
				}
				tray_output primary
}

# -----
# General Settings
new_window pixel 0
focus_follows_mouse no
workspace_auto_back_and_forth no

# -----
# Program Execution
exec compton &
exec sh ~/.fehbg &
exec mpd &
