set $bg #181512
set $fg #f0f0f0
set $bk #373737
set $rd #CC4141
set $gr #43803D
set $yl #dbab3b
set $bl #7882bf
set $mg #BF849C
set $cy #6AA9B0
set $wh #E39036
set $bk1 #474747
set $rd1 #BA2929
set $gr1 #2F632A
set $yl1 #c79520
set $bl1 #596196
set $mg1 #B06A86
set $cy1 #4D8B91
set $wh1 #C97820

# -----
# Jamie Luck's i3 config file
#
# Peep dat http://i3wm.org/docs/userguide.html for a complete reference!

# Note that the first 18 lines are reserved for color inits. This is because they're all generated automatically
# when I update my .Xresources. When my bash-fu gets better, I'll figure out a way to insert them properly somewhere in the file

set $mod Mod1
set $mod4 Mod4
set $modr Mode_switch
floating_modifier $mod

# -----
# Font
# ISO 10646 = Unicode
#font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
#font -misc-envy code r-medium-r-normal--9-*-*-*-*-*-*-iso10646-*
#font xft:Envy Code R 9
#font -misc-tamsyn-medium-*-*--*-101-*-*-*-*-*
font -aaron-bitocra13-*-*-normal-*-*-*-*-*-*-*-*-*

# -----
# Colors

new_window pixel 2
#new_window normal
new_float pixel 2
hide_edge_borders none

#bindsym $mod4+1 border normal
#bindsym $mod4+2 border 1pixel
#bindsym $mod4+3 border none
#bindsym $mod4+4 border pixel 3

# Class											border		backgr.		text		indicator
client.focused 							$bg				$fg				$bg			$bk1
client.focused_inactive			$bg				$bg				$cy			$bk1
client.unfocused						$bg				$bg				$cy			$mg
client.urgent 							$bg				$mg				$rd			$mg

# -----
# Client-specific rules

# We're calling the workspaces as follows:
# a: terminAls, shit like that
# s: web browSing, general internets
# d: work, it's Dumb
# f: Fun!
# g: Generally misc.

assign [class="Firefox"] 2:s
assign [class="Opera"] 2:s
assign [class="Abiword"] 3:d
assign [class="Eclipse"] 3:d
assign [class="net-minecraft-LauncherFrame"] 5:g
assign [class="Steam"] 5:g

for_window [class="net-minecraft-LauncherFrame"] floating enable
for_window [class="MPlayer"] floating enable
for_window [class="VirtualBox"] floating enable
for_window [class="Lxappearance"] floating enable
for_window [class="Steam"] floating enable
for_window [class="Event Tester"] floating enable
for_window [class="mirage"] floating enable
for_window [class="feh"] floating enable
for_window [class="rdesktop"] floating enable

for_window [class="Firefox"] border none
for_window [class="^dwb$"] border none
for_window [class="feh"] border normal

# -----
# Keymaps

# Default mode is our insert mode since so many keystrokes are captured by clients. Getting out of it will be grave
# Normal mode will be our normal mode, you get to default by using i.
# 	This will include window movement, nav, tmux controls, and generic comm
# Commands is for special commands, will be triggered by ; and uses dmenu

# ---
# Insert Mode (default)

# Mode Changing
#bindsym grave mode "normal"
bindsym $mod+r mode "resize"

# Special Keys
bindsym XF86KbdBrightnessUp exec asus-kbd-backlight up
bindsym XF86KbdBrightnessDown exec asus-kbd-backlight down 
bindsym XF86TouchpadToggle exec ~/scripts/touchpadtoggle
bindsym XF86WebCam exec "scrot -q 100 '%Y-%m-%d_%H-%M-%S_$wx$h.png' -e 'mv $f ~/pictures/screenshot'"
bindsym XF86AudioRaiseVolume exec ~/scripts/dvol -i 5
bindsym XF86AudioLowerVolume exec ~/scripts/dvol -d 5
bindsym XF86AudioMute exec ~/scripts/dvol -t
bindsym XF86AudioPlay exec mpc toggle
bindsym XF86AudioNext exec mpc next
bindsym XF86AudioPrev exec mpc prev
bindsym XF86AudioStop exec mpc stop
bindsym XF86Calculator exec ~/scripts/dmenu_calc
bindsym XF86Launch1 exec mplayer tv://
#bindsym XF86Launch6 exec urxvt -e ranger
#bindsym $mod+XF86Launch1 exec urxvt -e ncmpcpp

# Program and Menu Launchers
bindsym $mod4+t exec i3-sensible-terminal
bindsym $mod4+Shift+t exec urxvt -e bash
bindsym $mod4+f exec urxvt -e ranger
bindsym $mod4+n exec urxvt -e ncmpcpp
bindsym $mod4+i exec urxvt -e vim ~/.i3/config
bindsym $mod4+Escape exec urxvt -e htop
bindsym $mod+comma exec quickswitch.py
bindsym $mod4+m exec urxvt -e ~/scripts/tmux_attach
bindsym $mod4+d exec dwb

# All muh Alt+Fn Menus
bindsym $mod+F1 exec ~/scripts/dmenu_man
bindsym $mod+F2 exec ~/scripts/dmenu_run_enhanced
bindsym $mod+F3 exec ~/scripts/dmenu_openwith
bindsym $mod+F4 exec ~/scripts/dmenu_nmcli
bindsym $mod+F5 exec ~/scripts/rscontrol -i
bindsym $mod+F6 exec ~/scripts/rscontrol -d
#bindsym $mod+F7 exec ~/scripts/
#bindsym $mod+F8 exec ~/scripts/
#bindsym $mod+F9 exec ~/scripts/
bindsym $mod+F10 exec ~/scripts/dmenu_mpc_selectFromPlaylist
bindsym $mod+F11 exec ~/scripts/dmenu_mpc_selectPlaylist
bindsym $mod+F12 exec ~/scripts/dmenu_mpc_search

bindsym $mod4+Shift+b exec ~/scripts/miscWall.sh
bindsym $mod4+Shift+v exec ~/scripts/dmenu_wallpaper

# Kill Client
bindsym $mod+Shift+q kill

# Jump to Previous Window using Marks
bindsym $mod+Shift+p exec i3-input -F 'mark %s' -l 1 -P 'Mark: '
bindsym $mod+p exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: '

# Change Focus, Move
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Shift+h move left 20px
bindsym $mod+Shift+j move down 20px
bindsym $mod+Shift+k move up 20px
bindsym $mod+Shift+l move right 20px

bindsym $mod+apostrophe fullscreen
bindsym $mod+m floating toggle
bindsym $mod+Shift+m focus mode_toggle
bindsym $mod+c move position center

bindsym $mod+Up split v
bindsym $mod+Left split h

bindsym $mod+bracketleft layout toggle
bindsym $mod+bracketright layout toggle split

bindsym $mod+e focus parent
#bindsym $mod+d focus child

# Tmux
bindsym $mod4+h exec tmux select-pane -L
bindsym $mod4+j exec tmux select-pane -D
bindsym $mod4+k exec tmux select-pane -U
bindsym $mod4+l exec tmux select-pane -R
bindsym $mod4+comma exec tmux select-pane -l
bindsym $mod4+q exec tmux kill-pane
bindsym $mod4+z exec tmux resize-pane -Z

# Workspaces
bindsym $mod+w workspace next
bindsym $mod+Shift+w move container to workspace next
bindsym $mod+b workspace prev
bindsym $mod+Shift+b move container to workspace prev

bindsym $mod+a workspace 1:a
bindsym $mod+s workspace 2:s
bindsym $mod+d workspace 3:d
bindsym $mod+f workspace 4:f
bindsym $mod+g workspace 5:g

bindsym $mod+Shift+a move container to workspace 1:a
bindsym $mod+Shift+s move container to workspace 2:s
bindsym $mod+Shift+d move container to workspace 3:d
bindsym $mod+Shift+f move container to workspace 4:f
bindsym $mod+Shift+g move container to workspace 5:g

#bindsym $mod+g exec i3-input -F 'rename workspace to %s' -l 1 -P 'New name: ' bindsym $mod+Shift+f exec i3-input -F 'move container to workspace %s' -l 1 -P 'Move to workspace: '
#bindsym $mod+f exec i3-input -F 'workspace %s' -l 1 -P 'Jump to workspace: '
#bindsym XF86Launch2 exec i3-input -F 'workspace %s' -l 1 -P 'Jump to workspace: ' 

bindsym $mod+minus scratchpad show
bindsym $mod+Shift+minus move scratchpad

# ---
# Normal Mode
mode "normal" {
	# Mode Changes
	bindsym i mode "default"
	bindsym r mode "resize"
	bindsym o workspace prev ;mode "default"
	bindsym Shift+o workspace next ;mode "default"

	bindsym semicolon exec ~/scripts/i3menu

	# Focus
	bindsym h focus left
	bindsym j focus down
	bindsym k focus up
	bindsym l focus right

	bindsym Shift+h move left
	bindsym Shift+j move down
	bindsym Shift+k move up
	bindsym Shift+l move right

	# Tmux Controls (Alt is pane op, Win is window op)
	#-F "#S: #{session_windows} Windows #{?session_attached,[Attached,[Not Attached}, #{?pane_active,Active],Inactive]}"
	bindsym $mod+s exec source ~/.dmenurc && tmux switch-client -t$(tmux ls | $DMENU -p "Tmux:" | cut -c1)
	bindsym $mod+h exec tmux select-pane -L
	bindsym $mod+j exec tmux select-pane -D
	bindsym $mod+k exec tmux select-pane -U
	bindsym $mod+l exec tmux select-pane -R
	bindsym $mod+comma exec tmux select-pane -l
	bindsym $mod+q exec tmux kill-pane
	bindsym $mod+z exec tmux resize-pane -Z

	bindsym $mod4+h exec tmux previous-window
	bindsym $mod4+l exec tmux next-window
	bindsym $mod4+comma exec tmux last-window
	bindsym $mod4+bracketleft exec tmux next-layout

	# Client Changes
	bindsym Shift+q kill

	bindsym m floating toggle
	bindsym Shift+m focus mode_toggle

	# Change container layout (stacked, tabbed, toggle split)
	bindsym bracketleft layout toggle
	bindsym bracketright layout toggle split
	bindsym apostrophe fullscreen

	# Workspaces
	bindsym w workspace next
	bindsym b workspace prev

	bindsym a workspace 1:a
	bindsym s workspace 2:s
	bindsym d workspace 3:d
	bindsym f workspace 4:f
	bindsym g workspace 5:g

	bindsym Shift+a move container to workspace 1:a
	bindsym Shift+s move container to workspace 2:s
	bindsym Shift+d move container to workspace 3:d
	bindsym Shift+f move container to workspace 4:f
	bindsym Shift+g move container to workspace 5:g

	bindsym minus scratchpad show
	bindsym Shift+minus move scratchpad

	# Menu Launchers & Specialized Key Handlers
	bindsym F1 exec systemctl hibernate
	bindsym F2 exec ~/scripts/obmenu.sh
	bindsym F3 exec asus-kbd-backlight down 
	bindsym F4 exec asus-kbd-backlight up
	bindsym F5 exec xbacklight -dec 40
	bindsym $mod+F5 exec ~/scripts/rscontrol -i
	bindsym $mod+$mod4+F5 Exec ~/scripts/rscontrol -l
	bindsym F6 exec xbacklight -inc 40
	bindsym $mod+F6 exec ~/scripts/rscontrol -d
	bindsym $mod+$mod4+F6 Exec ~/scripts/rscontrol -b
	bindsym F7 exec xbacklight -set 0
	bindsym $mod+F8 exec ~/scripts/man_dmenu
	bindsym F9 exec ~/scripts/touchpadtoggle
	bindsym F10 exec ~/scripts/dvol -t
	bindsym F11 exec ~/scripts/dvol -d 5
	bindsym F12 exec ~/scripts/dvol -i 5

	bindsym XF86Launch6 exec gksudo mount -t vfat /dev/sdb1 /mnt/vfat
	bindsym Shift+XF86Launch6 exec gksudo umount /mnt/vfat

	bindsym Down exec mpc toggle
	bindsym Right exec mpc next
	bindsym Left exec mpc prev
	bindsym Up exec mpc stop
}

# ---
# Resize Mode

mode "resize" {
	# Mode Changes
	bindsym i mode "default"
	bindsym grave mode "normal"
	bindsym Escape mode "default"

	# Window Changes
  bindsym h resize shrink width 20 px or 10 ppt
  bindsym j resize grow height 20 px or 10 ppt
  bindsym k resize shrink height 20 px or 10 ppt
  bindsym l resize grow width 20 px or 10 ppt
}

# -----
# General

# Reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# -----
# i3bar

bar {
	modifier $mod
  status_command i3status --config ~/.i3status.conf
	tray_output none # Fuck yo tray!

	mode dock
	position top

	colors {
		# These are set to single values
		background $bg
		statusline $fg
		separator $bk1

		# These are triplets of border, background, text
		focused_workspace $fg $bg $fg
		active_workspace $wh $cy
		inactive_workspace $bk $bg $bk
		urgent_workspace $bg $rd
	}
}

# -----
# General Settings
#new_window pixel 0
focus_follows_mouse no
workspace_auto_back_and_forth no

# -----
# Program Execution
exec compton &
exec sh ~/.fehbg &
exec mpd &
exec dropbox start
