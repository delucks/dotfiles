# -----
# delucks' i3 config file
#
# Peep dat http://i3wm.org/docs/userguide.html for a complete reference!

# Note that the first 18 lines are reserved for color inits. This is because they're all generated automatically
# when I update my .Xresources. When my bash-fu gets better, I'll figure out a way to insert them properly somewhere in the file

set $mod Mod4
set $mod4 Mod1
set $modr Mode_switch
floating_modifier $mod

# -----
# Font
font -*-tamsyn-medium-r-*-*-17-*-*-*-*-*-iso8859-*

# -----
# Colors

new_window pixel 5
new_float pixel 5
hide_edge_borders none

for_window [class="^.*"] border pixel 5
gaps outer 10
gaps inner 30

# -----
# Client-specific rules

assign [class="net-minecraft-LauncherFrame"] 5:g
assign [class="Steam"] 5:g

for_window [class="net-minecraft-LauncherFrame"] floating enable
for_window [class="MPlayer"] floating enable
for_window [class="VMWare"] floating enable
for_window [class="Lxappearance"] floating enable
for_window [class="Steam"] floating enable
for_window [class="Event Tester"] floating enable
for_window [class="mirage"] floating enable
for_window [class="feh"] floating enable
for_window [class="rdesktop"] floating enable
for_window [class="violet"] floating enable

# -----
# Keymaps

# Mode Changing
bindsym $mod+grave mode "game"
bindsym $mod+r mode "resize"

# Special Keys
bindsym XF86KbdBrightnessUp exec asus-kbd-backlight up
bindsym XF86KbdBrightnessDown exec asus-kbd-backlight down 
bindsym XF86TouchpadToggle exec ~/scripts/touchpadtoggle
bindsym XF86WebCam exec "scrot -q 100 '%Y-%m-%d_%H-%M-%S_$wx$h.png' -e 'mv $f ~/img/screenshot'"
bindsym XF86AudioRaiseVolume exec ~/scripts/dvol -i 5
bindsym XF86AudioLowerVolume exec ~/scripts/dvol -d 5
bindsym XF86AudioMute exec ~/scripts/dvol -t
bindsym XF86AudioPlay exec ~/scripts/spotifyctrl.py -t
bindsym XF86AudioNext exec ~/scripts/spotifyctrl.py -n
bindsym XF86AudioPrev exec ~/scripts/spotifyctrl.py -p
bindsym XF86AudioStop exec ~/scripts/spotifyctrl.py -t
bindsym XF86Calculator exec ~/scripts/dmenu_calc
bindsym XF86Launch6 exec ~/scripts/block

# Program and Menu Launchers
bindsym $mod+t exec urxvt
bindsym $mod4+t exec urxvt -e bash -c 'ssh cluster'

# All muh Alt+Fn Menus
bindsym $mod+F1 exec ~/scripts/dmenu_man
bindsym $mod+F2 exec ~/scripts/dmenu_run_enhanced
bindsym $mod+F3 exec ~/scripts/dmenu_ssh
#bindsym $mod+F4 exec ~/scripts/
#bindsym $mod+F5 exec ~/scripts/
#bindsym $mod+F6 exec ~/scripts/
#bindsym $mod+F7 exec ~/scripts/
#bindsym $mod+F8 exec ~/scripts/
#bindsym $mod+F9 exec ~/scripts/
bindsym $mod+F10 exec amixer set Speaker toggle
#bindsym $mod+F11 exec ~/scripts/
#bindsym $mod+F12 exec ~/scripts/
bindsym $mod+n exec ~/scripts/current

# Kill Client
bindsym $mod+Shift+r kill

# Jump to Previous Window using Marks
bindsym $mod+Shift+p exec i3-input -F 'mark %s' -l 1 -P 'Mark: '
bindsym $mod+p exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: '

# Change Focus, Move
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Shift+h move left 50px
bindsym $mod+Shift+j move down 50px
bindsym $mod+Shift+k move up 50px
bindsym $mod+Shift+l move right 50px
bindsym $mod+Control+h resize shrink width 20 px or 10 ppt
bindsym $mod+Control+j resize grow height 20 px or 10 ppt
bindsym $mod+Control+k resize shrink height 20 px or 10 ppt
bindsym $mod+Control+l resize grow width 20 px or 10 ppt
bindsym $mod+Shift+Control+h resize shrink width 10 px or 5 ppt
bindsym $mod+Shift+Control+j resize grow height 10 px or 5 ppt
bindsym $mod+Shift+Control+k resize shrink height 10 px or 5 ppt
bindsym $mod+Shift+Control+l resize grow width 10 px or 5 ppt

bindsym $mod+apostrophe fullscreen
bindsym $mod+m floating toggle
bindsym $mod+Shift+m focus mode_toggle
bindsym $mod+c move position center

bindsym $mod+u split v
bindsym $mod+o split h

bindsym $mod+Shift+space layout toggle
bindsym $mod+space layout toggle split

#bindsym $mod+e focus parent
#bindsym $mod+d focus child

# Workspaces
#bindsym $mod+w workspace next
#bindsym $mod+Shift+w move container to workspace next
#bindsym $mod+b workspace prev
#bindsym $mod+Shift+b move container to workspace prev

bindsym $mod+a workspace 1:a
bindsym $mod+s workspace 2:s
bindsym $mod+d workspace 3:d
bindsym $mod+f workspace 4:f
bindsym $mod+g workspace 5:g
bindsym $mod+q workspace 6:q
bindsym $mod+w workspace 7:w
bindsym $mod+e workspace 8:e

bindsym $mod+Shift+a move container to workspace 1:a
bindsym $mod+Shift+s move container to workspace 2:s
bindsym $mod+Shift+d move container to workspace 3:d
bindsym $mod+Shift+f move container to workspace 4:f
bindsym $mod+Shift+g move container to workspace 5:g
bindsym $mod+Shift+q move container to workspace 6:q
bindsym $mod+Shift+w move container to workspace 7:w
bindsym $mod+Shift+e move container to workspace 8:e

#bindsym $mod+g exec i3-input -F 'rename workspace to %s' -l 1 -P 'New name: ' bindsym $mod+Shift+f exec i3-input -F 'move container to workspace %s' -l 1 -P 'Move to workspace: '
#bindsym $mod+f exec i3-input -F 'workspace %s' -l 1 -P 'Jump to workspace: '
#bindsym XF86Launch2 exec i3-input -F 'workspace %s' -l 1 -P 'Jump to workspace: ' 

bindsym $mod+comma scratchpad show
bindsym $mod+Shift+comma move scratchpad

mode "game" {
  bindsym $mod+Shift+grave mode "default"
}

# ---
# Resize Mode

mode "resize" {
  # Mode Changes
  bindsym i mode "default"
  bindsym grave mode "normal"
  bindsym Escape mode "default"

  # Window Changes
  bindsym h resize shrink width 20 px or 10 ppt
  bindsym j resize grow height 20 px or 10 ppt
  bindsym k resize shrink height 20 px or 10 ppt
  bindsym l resize grow width 20 px or 10 ppt
}

# -----
# General

# Reload the configuration file
#bindsym $mod+Escape reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Escape restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+Escape exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# -----
# i3bar

bar {
  status_command i3blocks
  tray_output none # Fuck yo tray!
  separator_symbol "|"

  mode dock
  position bottom

  colors {
    # These are set to single values
    background $color16
    statusline $color17
    separator $color17

    # These are triplets of border, background, text
    focused_workspace $color9 $color16 $color9
    active_workspace $color16 $color2 $color16
    inactive_workspace $color7 $color16 $color7
    urgent_workspace $color1 $color16 $color1
  }
}

# -----
# General Settings
#new_window pixel 0
focus_follows_mouse no
workspace_auto_back_and_forth no

# -----
# Program Execution
exec compton &
exec sh ~/.fehbg &

# Class                      border            backgr.        text        indicator
client.focused              $background        $color9        $color3     $color0
client.focused_inactive     $background        $color0        $color3     $color0
client.unfocused            $background        $color0        $color3     $color4
client.urgent               $background        $color1        $color3     $color3
